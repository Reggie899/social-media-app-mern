{"ast":null,"code":"var _jsxFileName = \"/Users/reginaschmidt/Documents/Web-Projects/mern_example/client/src/context/auth/authContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from \"react\";\nimport authReducer, { authState } from \"./authReducer\";\nimport * as api from \"../../api/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(authState);\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(authReducer, authState);\n\n  const signIn = async (formData, navigate) => {\n    try {\n      const response = await api.login(formData);\n      console.log(\"response in signin\", response);\n      dispatch({\n        type: \"AUTH_SIGNIN\",\n        payload: response.data\n      });\n      localStorage.setItem(\"auth\", response.data.token);\n      navigate(\"/\");\n    } catch (err) {\n      dispatch({\n        type: \"SIGNIN_ERR\",\n        payload: err.message\n      });\n    }\n  };\n\n  const signUp = async (formData, navigate) => {\n    try {\n      const response = await api.signup(formData);\n      dispatch({\n        type: \"AUTH_SIGNUP\",\n        payload: response.data.savedUser\n      });\n      navigate(\"/\");\n    } catch (err) {\n      dispatch({\n        type: \"SIGNIN_ERR\",\n        payload: err.message\n      });\n    }\n  };\n\n  const tokenValidator = async () => {\n    try {\n      const response = await api.validateToken();\n      dispatch({\n        type: \"AUTH_VALID\",\n        payload: {\n          username: response.data.username,\n          id: response.data.id\n        }\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const signOut = () => {\n    dispatch({\n      type: \"SIGN_OUT\"\n    });\n    if (localStorage.getItem(\"auth\")) localStorage.removeItem(\"auth\");\n  };\n\n  const resetError = () => {\n    dispatch({\n      type: \"CLR_ERR\"\n    });\n  };\n\n  const value = {\n    signIn,\n    signUp,\n    signOut,\n    isAuthenticated: state.isAuthenticated,\n    error: state.error,\n    user: state.user,\n    tokenValidator,\n    resetError\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AuthProvider, \"JjP8HvDF4mJw9AgaPcNDLQJuegI=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/reginaschmidt/Documents/Web-Projects/mern_example/client/src/context/auth/authContext.js"],"names":["createContext","useReducer","authReducer","authState","api","AuthContext","AuthProvider","children","state","dispatch","signIn","formData","navigate","response","login","console","log","type","payload","data","localStorage","setItem","token","err","message","signUp","signup","savedUser","tokenValidator","validateToken","username","id","signOut","getItem","removeItem","resetError","value","isAuthenticated","error","user"],"mappings":"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","sourcesContent":["import {createContext, useReducer} from \"react\";\nimport authReducer, { authState } from \"./authReducer\";\nimport * as api from \"../../api/index\"\n\n\nexport const AuthContext = createContext(authState);\n\nexport const AuthProvider = ({children}) =>{\n\n    const [state, dispatch] = useReducer(authReducer, authState);\n\n    const signIn = async (formData, navigate) => {\n\n        try{\n            const response = await api.login(formData)\n            console.log(\"response in signin\", response)\n   \n                dispatch({type :\"AUTH_SIGNIN\", payload: response.data})\n                localStorage.setItem(\"auth\",response.data.token )\n                navigate(\"/\")\n\n            }\n            catch(err){\n            dispatch({type:\"SIGNIN_ERR\", payload:err.message})\n        }\n    }\n\n    const signUp = async (formData, navigate) => {\n\n        try{\n            const response = await api.signup(formData)\n            dispatch({type :\"AUTH_SIGNUP\", payload: response.data.savedUser}) \n            navigate(\"/\")\n\n        }\n        catch(err){\n            dispatch({type:\"SIGNIN_ERR\", payload:err.message})\n        }\n    }\n\n    const tokenValidator = async () =>{\n        \n        try{\n            const response = await api.validateToken()\n            dispatch({type :\"AUTH_VALID\", payload: {username: response.data.username, id: response.data.id}})\n        }\n        catch(err){\n            console.log(err)\n        } \n\n    }\n\n    const signOut = () => {\n        dispatch({type :\"SIGN_OUT\"})\n        if(localStorage.getItem(\"auth\")) localStorage.removeItem(\"auth\")\n        \n    }\n\n    const resetError = () => {\n        dispatch({type :\"CLR_ERR\"})\n        \n    }\n\n\n    const value ={\n        signIn,\n        signUp,\n        signOut,\n        isAuthenticated: state.isAuthenticated,\n        error: state.error,\n        user:state.user,\n        tokenValidator,\n        resetError\n        \n        \n    }\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n"]},"metadata":{},"sourceType":"module"}